<h1>Source Show</h1>
<strong>Title:</strong> <%= @source.title %></br>
<strong>Year:</strong> <%= @source.year %></br>
<strong>Purpose:</strong> <%= @source.purpose %></br>
<% unless @source.discard_reason.blank? %>
<strong>Discard Reason:</strong> <%= @source.discard_reason %></br>
<% end %>
<strong>Topic:</strong> <%= @source.topic.name %></br>
<strong>Processed:</strong> <%= @source.processed %></br>
</br>
</br>

<i><strong>Citation:</strong> <%= @source.citation %></i>

<h2>Spelling problems:</h2>
<ul><% @source.unverifieds.each do |unver| %>
  <li>
    <%= unver %>
    <ol><% Spellchecker.check( unver, dictionary = 'en' )[ 0 ][:suggestions].each do |sugg| %>
      <li><%= sugg %></li>
    <% end %></ol>
  </li>
<% end %></ul>

<h2>Source Authors:</h2>
<ul><% @source.authors.each do |author| %>
  <li><%= author.given_name %> <%= author.family_name %></li>
<% end %></ul>

<h2>Factors:</h2>
<ul><% @source.factors.each do |factor| %>
  <li>
    <%= factor.text %>
    <ul>
    <% factor.words.each do |word| %>
      <li>
        <%= word.raw %> | <%= word.stem.word %>
      </li>
    <% end %>
    </ul>
    <% unless factor.unverified.blank? %>
    <li>Unverified: <%= factor.unverified %></li>
    <% end %>
  </li>
<% end %></ul>


<h2>Cited Sources:</h2>
<ul><% @source.refs.each do |ref| %>
  <li><%= ref.citation %></li>
<% end %></ul>

<h1>Add Sources</h1>
<%= form_tag add_refs_to_source_path( @source ) do %>
  <%= text_area_tag 'sources', '', size: "100x25" %>
  <%= submit_tag 'Add ''em!' %>
<% end %>

<%= link_to "Edit Source", edit_source_path( @source ) %><br>
